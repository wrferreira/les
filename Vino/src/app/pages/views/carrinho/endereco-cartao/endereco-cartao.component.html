<div class="container" style="width: 800px;">
    <div class="row">
      <div class="col-md-12 d-flex align-items-center">
        <mat-icon class="mr-2">location_on</mat-icon>
        <h2 class="p-0 m-0">Selecione o endereço</h2>
      </div>
    </div>    
    <div class="row d-flex justify-content-center">
        <div class="card" style="width: 100%;">
            <div class="card-body">
                <h3 class="card-title mb-2"><strong>Endereço Principal</strong></h3>              
                <div *ngIf="carrinho.enderecos.length">
                    <h5 class="card-text mb-0">{{ carrinho.enderecoEntrega.logradouro + ', ' + carrinho.enderecoEntrega.numero }}</h5>
                    <h5 class="card-text mb-0">{{ carrinho.enderecoEntrega.bairro }}</h5>
                    <h5 class="card-text mb-3">{{ 'CEP ' + carrinho.enderecoEntrega.cep + ' - ' + carrinho.enderecoEntrega.cidade + ' - ' + carrinho.enderecoEntrega.uf }}</h5>
                    <div>
                        <button class="btn btn-dark btn-sm mr-2" (click)="showModalEndereco(true)">Editar</button>
                        <button class="btn btn-dark btn-sm btn-pre-cadastro" (click)="showModalTroca(modalTrocaEndereco)">Selecionar outro</button>
                    </div>
                </div>
                <div *ngIf="!carrinho.enderecos.length">
                    <button class="btn btn-dark btn-sm mr-2 mt-3" (click)="showModalEndereco(false)">Cadastrar</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="barra"></div>

    <div class="row mt-5">
        <div class="col-md-12 d-flex align-items-center">
          <mat-icon class="mr-2">credit_card</mat-icon>
          <h2 class="p-0 m-0">Pagamento</h2>
        </div>
      </div>    
      <div class="row d-flex justify-content-center">
          <div class="card" style="width: 100%;">
              <div class="card-body">
                  <h3 class="card-title mb-2"><strong>Cartão Principal</strong></h3>              
                  <div *ngIf="carrinho.cartoes.length">
                      <h5 class="card-text mb-0">{{ carrinho.cartaoPagamento.titular }}</h5>
                      <h5 class="card-text mb-0">{{ carrinho.cartaoPagamento.numero }}</h5>
                      <h5 class="card-text mb-0">{{ carrinho.cartaoPagamento.dataValidade }}</h5>
                      <h5 class="card-text mb-3">MasterCard</h5>
                      <div>
                          <button class="btn btn-dark btn-sm mr-2" (click)="showModalCartao(true)">Editar</button>
                          <button class="btn btn-dark btn-sm btn-pre-cadastro" (click)="showModalTroca(modalTrocaCartao)">Selecionar outro</button>
                      </div>
                  </div>
                  <div *ngIf="!carrinho.cartoes.length">
                      <button class="btn btn-dark btn-sm mr-2 mt-3" (click)="showModalCartao(false)">Cadastrar</button>
                  </div>
              </div>
          </div>
      </div>

      <div class="btn-avancar">
        <button type="button" class="btn btn-dark btn-sm" matStepperNext (click)="setCarrinho()"
            [disabled]="carrinho.enderecoEntrega.id == undefined || carrinho.cartaoPagamento.id == undefined">
            CONFIRMAR PAGAMENTO
        </button>
    </div>
</div>


<!-- MODAL TROCA ENDEREÇO -->
<ng-template #modalTrocaEndereco let-modal class="modal-troca">
    <div class="modal-header">
        <div class="d-flex align-items-center">
            <mat-icon class="mr-2">location_on</mat-icon>
            <p class="modal-title p-0 m-0"><strong>Endereço</strong></p>
        </div>
    </div>
    <div class="modal-body">        
        <div *ngFor="let endereco of carrinho.enderecos">
            <div class="card mt-1" style="width: 100%;">
                <div class="card-body">                  
                    <h3 class="card-title mb-2"><strong>Endereço de {{ endereco.tipoEndereco }}</strong></h3>
                    <div class="d-flex align-items-center ">
                        <input class="mr-3" type="radio" value="{{ endereco.id }}" [(ngModel)]="enderecoTroca">
                        <div>
                            <h5 class="card-text mb-0">{{ endereco.logradouro + ', ' + endereco.numero }}</h5>
                            <h5 class="card-text mb-0">{{ endereco.bairro }}</h5>
                            <h5 class="card-text mb-0">{{ 'CEP ' + endereco.cep + ' - ' + endereco.cidade + ' - ' + endereco.uf }}</h5>                            
                        </div>                        
                    </div>
                </div>
            </div>            
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-dark btn-sm" (click)="setTrocaEndereco()">Selecionar</button>
        <button type="button" class="btn btn-dark btn-sm" (click)="showModalEndereco(false)">Novo Endereço</button>        
    </div>
</ng-template>


<!-- MODAL TROCA CARTÃO -->
<ng-template #modalTrocaCartao let-modal class="modal-troca">
    <div class="modal-header">
        <div class="d-flex align-items-center">
            <mat-icon class="mr-2">credit_card</mat-icon>
            <p class="modal-title p-0 m-0"><strong>Cartão</strong></p>
        </div>
    </div>
    <div class="modal-body">        
        <div *ngFor="let cartao of carrinho.cartoes">
            <div class="card mt-1" style="width: 100%;">
                <div class="card-body">                  
                    <h3 class="card-title mb-2"><strong>Cartão {{ cartao.bandeira }}</strong></h3>
                    <div class="d-flex align-items-center ">
                        <input class="mr-3" type="radio" value="{{ cartao.id }}" [(ngModel)]="cartaoTroca">
                        <div>
                            <h5 class="card-text mb-0">{{ cartao.titular }}</h5>
                            <h5 class="card-text mb-0">{{ cartao.numero }}</h5>
                            <h5 class="card-text mb-0">{{ cartao.dataValidade }}</h5>
                        </div>                        
                    </div>
                </div>
            </div>            
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-dark btn-sm" (click)="setTrocaCartao()">Selecionar</button>
        <button type="button" class="btn btn-dark btn-sm" (click)="showModalCartao(false)">Novo Endereço</button>        
    </div>
</ng-template>

